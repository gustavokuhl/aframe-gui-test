<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script type="module" src="/script/aframe-gui.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
  </head>
  <body>
    <a-scene gui-env environment>
      <a-assets>
        <a-asset-item id="mapa" src="mapa_floripa.glb"></a-asset-item>
      </a-assets>

      <a-entity gltf-model="#mapa" position="3 0 -3"></a-entity>

      <a-gui-flex-container
        flex-direction="column"
        position="0 1.7 -1"
        panel-rounded="0.02"
        rotation="0 0 0"
        width="0.5"
        height="0.45"
        item-paddin="0.1"
      >
        <a-gui-flex-container
          flex-direction="column"
          justify-content="center"
          align-items="normal"
          width="0.5"
          height="0.3"
          panel-color="#FFFFFF"
        >
          <a-gui-label
            width="0.5"
            height="0.3"
            value="Ola"
            font-size="0.2"
            background-color="#FFFFFF"
            radius="0.2"
          >
          </a-gui-label>
        </a-gui-flex-container>
        <a-gui-button
          id="btn-init"
          width="0.5"
          height="0.1"
          value=">>>"
          font-size="0.05"
          toggle="true"
          margin="-0.05 0 0 0"
          radius="0.2"
        >
        </a-gui-button>
      </a-gui-flex-container>

      <a-gui-flex-container
        flex-direction="column"
        justify-content="center"
        align-items="normal"
        component-padding="0.1"
        opacity="0.7"
        width="3.5"
        height="4.5"
        panel-color="#072B73"
        panel-rounded="0.2"
        position="-4 2.5 -6"
        rotation="0 0 0"
      >
        <a-gui-button
          id="btn1"
          width="2.5"
          height="0.7"
          base-depth="0.05"
          depth="0.2"
          gap="0.1"
          radius="0"
          onclick="testButtonAction1"
          value="test button"
          font-family="assets/fonts/PermanentMarker-Regular.ttf"
          font-size="0.35"
          margin="0 0 0.05 0"
          toggle="true"
        >
        </a-gui-button>

        <a-gui-button
          width="2.5"
          height="0.7"
          base-depth="0.025"
          depth="0.1"
          gap="0.1"
          radius="0"
          onclick="testButtonAction2"
          value="Another button"
          font-family="assets/fonts/PermanentMarker-Regular.ttf"
          font-size="0.275"
          margin="0 0 0.05 0"
          font-color="black"
          active-color="red"
          hover-color="yellow"
          border-color="white"
          focus-color="black"
          background-color="orange"
        >
        </a-gui-button>

        <a-gui-button
          width="2.75"
          height="1"
          base-depth="0.1"
          depth="0.3"
          gap="0.1"
          radius="0"
          onclick="testButtonAction3"
          value="Example Bevel"
          font-family="assets/fonts/DiplomataSC-Regular.ttf"
          font-size="0.25"
          margin="0 0 0.05 0"
          bevel="true"
        >
        </a-gui-button>

        <a-gui-button
          width="2.5"
          height="0.7"
          gap="0.2"
          onclick="testButtonAction4"
          value="Example 4"
          font-family="assets/fonts/Plaster-Regular.ttf"
          font-size="0.275"
          margin="0 0 0.05 0"
        >
        </a-gui-button>

        <a-gui-button
          width="2.5"
          height="0.7"
          onclick="testButtonAction5"
          value="Example 5"
        >
        </a-gui-button>
      </a-gui-flex-container>

      <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box>
      <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
      <a-cylinder
        position="1 0.75 -3"
        radius="0.5"
        height="1.5"
        color="#FFC65D"
      ></a-cylinder>
      <a-plane
        position="0 0.01 -4"
        rotation="-90 0 0"
        width="4"
        height="4"
        color="#7BC8A4"
      ></a-plane>
      <a-sky color="#ECECEC"></a-sky>

      <!-- Mouse cursor so we can click on the scene with mouse or touch. -->
      <a-entity
        id="mouseCursor"
        cursor="rayOrigin: mouse"
        raycaster="objects: [gui-interactable]"
      ></a-entity>
      <a-entity
        id="leftHand"
        laser-controls="hand: left"
        raycaster="objects: [gui-interactable]"
      ></a-entity>
      <a-entity
        id="rightHand"
        laser-controls="hand: right"
        raycaster="objects: [gui-interactable]"
      ></a-entity>

      <a-entity id="cameraRig" position="0 1.6 0">
        <a-camera look-controls wasd-controls position="0 0 0"> </a-camera>
        <!-- /camera -->
      </a-entity>
    </a-scene>
    <script type="text/javascript">
      function startTimer(duration, display) {
        var timer = duration,
          minutes,
          seconds
        setInterval(function () {
          seconds = parseInt(timer % 60, 10)
          seconds = seconds < 10 ? "0" + seconds : seconds
          display.setAttribute("count-down", seconds)
          if (--timer < 0) {
            timer = duration
          }
        }, 1000)
      }

      window.onload = function () {
        var countDownEntity = document.getElementById("timer"),
          duration = countDownEntity.getAttribute("count-down")
        startTimer(duration, countDownEntity)
      }

      window.timedout = function () {
        console.log("GUI timer timed out")
      }

      window.testButtonAction1 = function () {
        console.log("clicked GUI")
      }

      window.testButtonAction2 = function () {
        console.log("clicked GUI")
      }

      window.testButtonAction3 = function () {
        console.log("clicked GUI")
      }

      window.testButtonAction4 = function () {
        console.log("clicked GUI")
      }

      window.testButtonAction5 = function () {
        console.log("clicked GUI")
      }

      window.testButtonAction = function () {
        console.log("clicked GUI")
      }

      window.testToggleAction = function () {
        console.log("clicked GUI")
      }

      window.testSliderAction = function () {
        console.log("clicked GUI")
      }

      window.testInputAction = function () {
        console.log("clicked GUI")
      }

      var data = document.querySelector("#btn1")
      var controls

      var initControls = function () {
        this.value = "sample"
        this.fontColor = "#F2BB16"
        this.backgroundColor = "#011C40"
        this.borderColor = "#F2BB16"
        this.focusColor = "#ff0000"
        this.hoverColor = "#2a5b7a"
        this.activeColor = "#5687A6"
        this.fontSize = 0.3
        this.toggle = true
        this.fontFamily = "PressStart2P"
        // this.width=2.75;
        // this.height=0.7;
        // this.baseDepth=0.05;
        // this.depth=0.2;
        // this.gap=0.1;
        // this.radius=0;
      }

      window.onload = function () {
        controls = new initControls()
        // setValue()
        var gui = new dat.GUI()
        gui.add(controls, "value").onChange(setValue)
        gui.addColor(controls, "fontColor").onChange(setValue)
        gui.addColor(controls, "hoverColor").onChange(setValue)
        gui.addColor(controls, "activeColor").onChange(setValue)
        gui.addColor(controls, "borderColor").onChange(setValue)
        gui.addColor(controls, "focusColor").onChange(setValue)
        gui.addColor(controls, "backgroundColor").onChange(setValue)
        gui.add(controls, "fontSize", 0, 1).onChange(setValue)
        gui.add(controls, "toggle").onChange(setValue)
        gui
          .add(controls, "fontFamily", [
            "PermanentMarker",
            "PressStart2P",
            "Plaster",
            "DiplomataSC",
          ])
          .onChange(setValue)
        // gui.add(controls, 'width', 0, 5).onChange(setValue);
        // gui.add(controls, 'height', 0, 5).onChange(setValue);
        // gui.add(controls, 'baseDepth', 0, 1).onChange(setValue);
        // gui.add(controls, 'depth', 0, 1).onChange(setValue);
        // gui.add(controls, 'gap', 0, 1).onChange(setValue);
        // gui.add(controls, 'radius', 0, 1).onChange(setValue);
      }

      function setValue() {
        data.setAttribute("value", controls.value)
        data.setAttribute(
          "font-family",
          "assets/fonts/" + controls.fontFamily + "-Regular.ttf"
        )
        data.setAttribute("font-size", controls.fontSize)
        data.setAttribute("font-color", controls.fontColor)
        data.setAttribute("active-color", controls.activeColor)
        data.setAttribute("hover-color", controls.hoverColor)
        data.setAttribute("border-color", controls.borderColor)
        data.setAttribute("focus-color", controls.focusColor)
        data.setAttribute("background-color", controls.backgroundColor)
        data.setAttribute("toggle", controls.toggle)
        // data.setAttribute('width',controls.width);
        // data.setAttribute('height',controls.height);
        // data.setAttribute('base-depth',controls.baseDepth);
        // data.setAttribute('depth',controls.depth);
        // data.setAttribute('gap',controls.gap);
        // data.setAttribute('radius',controls.radius);
      }
    </script>
  </body>
</html>
